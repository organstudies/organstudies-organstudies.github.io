

<!DOCTYPE html>
<html lang="en-us" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="schizophrenic out for a stroll # Still one place to go # Pit Inn | アケタの店 | Snuff out # Hi-Posi | 水晶の舟 | 在读 # 地下乡愁蓝调 8.3 这不仅仅是一本乐评集。 这是一本披着音乐外衣的青春事件簿，一部关于已逝年代的往事纪念册。">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#ffffff">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#343a40">
  <meta name="color-scheme" content="light dark">
  <meta property="og:url" content="http://localhost:1313/">
  <meta property="og:site_name" content="Organ Studies">
  <meta property="og:title" content="Intro">
  <meta property="og:description" content="schizophrenic out for a stroll # Still one place to go # Pit Inn | アケタの店 | Snuff out # Hi-Posi | 水晶の舟 | 在读 # 地下乡愁蓝调 8.3 这不仅仅是一本乐评集。">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="website">
  <meta name="generator" content="Hugo 0.125.7">
  
  <title>Intro | Organ Studies</title>
  
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="/favicon.png">
  <link rel="canonical" href="http://localhost:1313/">
  <link rel="stylesheet" href="/book.min.8c6d01220b80819b1eb15f6a6f2c6ff7309e1db7c85b69d430ddd47ca064bd2e.css" integrity="sha256-jG0BIguAgZsesV9qbyxv9zCeHbfIW2nUMN3UfKBkvS4=" crossorigin="anonymous">
  
  <script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <script defer src="/fuse.min.js"></script>
  <script defer src="/en.search.min.7509163f893ff22d5222d8c6fd86738f29773107586033cecf6dffcdfe1ea103.js" integrity="sha256-dQkWP4k/8i1SItjG/YZzjyl3MQdYYDPOz23/zf4eoQM=" crossorigin="anonymous"></script>
  <script src="/js/custom.js"></script>
  
  <link rel="alternate" type="application/rss+xml" href="http://localhost:1313/index.xml" title="Organ Studies">
</head>
<body dir="ltr">
  <input type="checkbox" class="hidden toggle" id="menu-control">
  <input type="checkbox" class="hidden toggle" id="toc-control">
  <main class="container flex">
    <aside class="book-menu">
      <div class="book-menu-content">
        <nav>
          <h2 class="book-brand">
            <a class="flex align-center" href="/">
              <img src="/favicon.png" alt="Logo">
              <span>Organ Studies</span>
            </a>
          </h2>
          
          <div class="book-search hidden">
            <input type="text" id="book-search-input" placeholder="" aria-label="" maxlength="64" data-hotkeys="s/">
            <div class="book-search-spinner hidden"></div>
            <ul id="book-search-results"></ul>
          </div>
          <script>document.querySelector(".book-search").classList.remove("hidden")</script>
          
          <ul>
            <li class="book-section-flat">
              <a href="/docs/about/" class="">About</a>
              <ul></ul>
            </li>
            <li>
              <a href="/docs/still-one-place-to-go/" class="">Still One Place to Go</a>
              <ul>
                <li>
                  <input type="checkbox" id="section-8b8d5976089e1c7a40079f4e6aa181e6" class="toggle">
                  <label for="section-8b8d5976089e1c7a40079f4e6aa181e6" class="flex justify-between">
                    <a role="button" class="">Snuff Out</a>
                  </label>
                  <ul></ul>
                </li>
              </ul>
            </li>
          </ul>
          
          <ul>
            <li>
              <a href="/posts/">Blog</a>
            </li>
          </ul>
        </nav>
        
        <script>
          (function() {
            var e = document.querySelector("aside .book-menu-content");
            addEventListener("beforeunload", function() {
              localStorage.setItem("menu.scrollTop", e.scrollTop);
            });
            e.scrollTop = localStorage.getItem("menu.scrollTop");
          })();
        </script>
      </div>
    </aside>
    
    <div class="book-page">
      <header class="book-header">
        <div class="flex align-center justify-between">
          <label for="menu-control">
            <img src="/svg/menu.svg" class="book-icon" alt="Menu">
          </label>
          <strong>Intro</strong>
          <label for="toc-control">
            <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents">
          </label>
        </div>
        
        <aside class="hidden clearfix">
          <nav id="TableOfContents">
            <ul>
              <li><a href="#在读">在读</a></li>
              <li><a href="#在听">在听</a></li>
              <li><a href="#在玩">在玩</a></li>
            </ul>
          </nav>
        </aside>
      </header>
      
      <article class="markdown book-article">
        <h1 id="schizophrenic-out-for-a-stroll">
          schizophrenic out for a stroll
          <a class="anchor" href="#schizophrenic-out-for-a-stroll">#</a>
        </h1>
        <div class="book-columns flex flex-wrap">
          <div class="flex-even markdown-inner">
            <h2 id="still-one-place-to-go">
              Still one place to go
              <a class="anchor" href="#still-one-place-to-go">#</a>
            </h2>
            <p>Pit Inn | アケタの店 |</p>
          </div>
          <div class="flex-even markdown-inner">
            <h2 id="snuff-out">
              Snuff out
              <a class="anchor" href="#snuff-out">#</a>
            </h2>
            <p>Hi-Posi | 水晶の舟 |</p>
          </div>
        </div>
        
        <h2 id="在读">
          在读
          <a class="anchor" href="#%e5%9c%a8%e8%af%bb">#</a>
        </h2>
        <div class="db-card">
          <div class="db-card-subject">
            <div class="db-card-post">
              <img loading="lazy" decoding="async" referrerpolicy="no-referrer" src="https://neodb.social/m/book/2021/09/168a46fc68-acaf-4678-8cc4-3f4ddabffa27.jpg" alt="">
            </div>
            <div class="db-card-content">
              <div class="db-card-title">
                <a

 href="https://neodb.social/books/168a46fc68/" target="_blank" rel="noopener noreferrer">地下乡愁蓝调</a>
              </div>
              <div class="db-card-info">8.3</div>
              <div class="db-card-desc">这不仅仅是一本乐评集。</div>
              <div class="db-card-desc">这是一本披着音乐外衣的青春事件簿，一部关于已逝年代的往事纪念册。</div>
            </div>
          </div>
        </div>
        
        <h2 id="在听">
          在听
          <a class="anchor" href="#%e5%9c%a8%e5%90%ac">#</a>
        </h2>
        <p>...</p>
        
        <h2 id="在玩">
          在玩
          <a class="anchor" href="#%e5%9c%a8%e7%8e%a9">#</a>
        </h2>
        <p>...</p>
      </article>
    </div>
  </main>
</body>
</html>


<div id="heatmap" style="
  max-width: 600px;
  height: 180px;
  padding: 2px;
  text-align: center;
  margin: auto"
></div>
<script src="https://npm.elemecdn.com/echarts@5.3.0/dist/echarts.min.js"></script>
<script type="text/javascript">
  var chartDom = document.getElementById('heatmap');
  var myChart = echarts.init(chartDom);
  window.onresize = function() {
      myChart.resize();
  };
  var option;

  // echart heatmap data seems to only support two elements tuple
  // it doesn't render when each item has 3 value
  // it also only pass first 2 elements when reading event param
  // so here we build a map to store additional metadata like link and title
  // map format {date: [{wordcount, link, title}]}
  // for more information see https://blog.douchi.space/hugo-blog-heatmap
  var dataMap = new Map();
  {{ range ((where .Site.RegularPages "Type" "post")) }}
    var key = {{ .Date.Format "2006-01-02" }};
    var value = dataMap.get(key);
    var wordCount = {{ .WordCount }};
    var link = {{ .RelPermalink}};
    var title = {{ .Title }};
    
    // multiple posts in same day
    if (value == null) {
      dataMap.set(key, [{wordCount, link, title}]);
    } else {
      value.push({wordCount, link, title});
    }
  {{- end -}}

  var data = [];
  // sum up the word count
  for (const [key, value] of dataMap.entries()) {
    var sum = 0;
    for (const v of value) {
      sum += v.wordCount;
    }
    data.push([key, (sum / 1000).toFixed(1)]);
  }
  
  var startDate = new Date();
  var year_Mill = startDate.setFullYear((startDate.getFullYear() - 1));
  var startDate = +new Date(year_Mill);
  var endDate = +new Date();

  var dayTime = 3600 * 24 * 1000;
  startDate = echarts.format.formatTime('yyyy-MM-dd', startDate);
  endDate = echarts.format.formatTime('yyyy-MM-dd', endDate);

  // change date range according to months we want to render
  function heatmap_width(months){             
    var startDate = new Date();
    var mill = startDate.setMonth((startDate.getMonth() - months));
    var endDate = +new Date();
    startDate = +new Date(mill);

    endDate = echarts.format.formatTime('yyyy-MM-dd', endDate);
    startDate = echarts.format.formatTime('yyyy-MM-dd', startDate);

    var showmonth = [];
    showmonth.push([
        startDate,
        endDate
    ]);
    return showmonth
  };

  function getRangeArr() {
    const windowWidth = window.innerWidth;
    if (windowWidth >= 600) {
      return heatmap_width(12);
    } else if (windowWidth >= 400) {
      return heatmap_width(9);
    } else {
      return heatmap_width(6);
    }
  }

  option = {
    title: {
        top: 0,
        left: 'center',
        text: '博客废话产量'
    },
    tooltip: {
      hideDelay: 1000,
      enterable: true,
      formatter: function (p) {
        const date = p.data[0];
        const posts = dataMap.get(date);
        var content = `${date}`;
        for (const [i, post] of posts.entries()) {
            content += "<br>";
            var link = post.link;
            var title = post.title;
            var wordCount = (post.wordCount / 1000).toFixed(1);
            content += `<a href="${link}" target="_blank">${title} | ${wordCount} 千字</a>`
        }
        return content;
      }
    },
    visualMap: {
        min: 0,
        max: 10,
        type: 'piecewise',
        orient: 'horizontal',
        left: 'center',
        top: 30,
        
        inRange: {   
          //  [floor color, ceiling color]
          color: ['#7aa8744c', '#7AA874' ] 
        },
        splitNumber: 4,
        text: ['千字', ''],
        showLabel: true,
        itemGap: 20,
    },
    calendar: {
        top: 80,
        left: 20,
        right: 4,
        cellSize: ['auto', 12],
        range: getRangeArr(),
        itemStyle: {
            color: '#F1F1F1',
            borderWidth: 2.5,
            borderColor: '#fff',
        },
        yearLabel: { show: false },
        // the splitline between months. set to transparent for now.
        splitLine: {
          lineStyle: {
            color: 'rgba(0, 0, 0, 0.0)',
            // shadowColor: 'rgba(0, 0, 0, 0.5)',
            // shadowBlur: 5,
            // width: 0.5,
            // type: 'dashed',
          }
        }
    },
    series: {
        type: 'heatmap',
        coordinateSystem: 'calendar',
        data: data,
    }
  };
  myChart.setOption(option);
  myChart.on('click', function(params) {
    if (params.componentType === 'series') {
      // open the first post on the day
      const post = dataMap.get(params.data[0])[0];
      const link = window.location.origin + post.link;
      window.open(link, '_blank').focus();
    }
});
</script> 
